[pytest]
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# Test paths - expanded to cover all services with tests
testpaths =
    pmoves/tests
    pmoves/services/publisher/tests
    pmoves/services/pmoves-yt/tests
    pmoves/services/publisher-discord/tests
    pmoves/services/agent-zero/tests
    pmoves/services/channel-monitor/tests
    pmoves/services/chat-relay/tests
    pmoves/services/common/tests
    pmoves/services/gateway/tests
    pmoves/services/flute-gateway/tests
    pmoves/services/hi-rag-gateway/tests
    pmoves/services/hi-rag-gateway-v2/tests
    pmoves/services/jellyfin-bridge/tests

# Use importlib mode to avoid requiring __init__.py in parent packages
addopts = --import-mode=importlib -v --tb=short

# Coverage configuration (activate with: pytest --cov)
# To run with coverage: pytest --cov=pmoves --cov-report=html --cov-report=term-missing

# Async test configuration
asyncio_mode = auto

# Markers
markers =
    slow: marks tests as slow (deselect with '-m "not slow"')
    integration: marks tests as integration tests
    gpu: marks tests requiring GPU
