export function parseChapters(text){ const lines=text.split(/\r?\n/); const out=[]; for(const ln of lines){ const m=ln.match(/(\d{1,2}:)?\d{1,2}:\d{2}/); if(!m) continue; const parts=m[0].split(":").map(n=>parseInt(n,10)); const secs=parts.length===3?parts[0]*3600+parts[1]*60+parts[2]:parts[0]*60+parts[1]; const title=ln.replace(m[0],"").trim().replace(/^[-–—:\s]+/,"")||`Chapter ${out.length+1}`; out.push({ t:secs, title }); } return out; }