# Shared credentials for PMOVES services.
# Copy to `pmoves/env.shared` and fill in real values. The file is ignored by git.

## Supabase (remote / hybrid mode)
SUPABASE_URL=https://your-supabase.example.com
SUPABASE_KEY=
SUPABASE_SERVICE_KEY=
SUPABASE_ANON_KEY=
NEXT_PUBLIC_SUPABASE_URL=${SUPABASE_URL}
NEXT_PUBLIC_SUPABASE_ANON_KEY=${SUPABASE_ANON_KEY}
SUPABASE_REST_URL=http://localhost:3010
SUPA_REST_URL=${SUPABASE_REST_URL}
POSTGRES_HOSTNAME=supabase-db
POSTGRES_PORT=5432
POSTGRES_DB=cataclysm_pmoves
PGRST_JWT_SECRET=super-secret-jwt-token-with-at-least-32-characters-long
# Supabase boot operator (managed by `make supabase-boot-user` / `make first-run`)
# SUPABASE_BOOT_USER_EMAIL=operator@pmoves.local
# SUPABASE_BOOT_USER_PASSWORD=
# SUPABASE_BOOT_USER_JWT=
# SUPABASE_BOOT_USER_REFRESH=
# NEXT_PUBLIC_SUPABASE_BOOT_USER_JWT=${SUPABASE_BOOT_USER_JWT}

## Provider API keys (Open Notebook, Hi-RAG gateways, n8n flows, etc.)
OPENAI_API_KEY=
OPENAI_API_BASE=
# Workers AI helper: OPENAI_API_BASE=https://api.cloudflare.com/client/v4/accounts/${CLOUDFLARE_ACCOUNT_ID}/ai
GROQ_API_KEY=
ANTHROPIC_API_KEY=
GEMINI_API_KEY=
GOOGLE_API_KEY=
MISTRAL_API_KEY=
DEEPSEEK_API_KEY=
OPENROUTER_API_KEY=
XAI_API_KEY=
ELEVENLABS_API_KEY=
VOYAGE_API_KEY=
COHERE_API_KEY=
FIREWORKS_AI_API_KEY=
PERPLEXITYAI_API_KEY=
TOGETHER_AI_API_KEY=
OLLAMA_BASE_URL=http://localhost:11434
OPENAI_COMPATIBLE_BASE_URL=
TENSORZERO_BASE_URL=http://localhost:3030
TENSORZERO_API_KEY=
TENSORZERO_MODEL=openai::gpt-4o-mini
TENSORZERO_TIMEOUT_SECONDS=60
# Comma-separated (key=value) or JSON string; forwarded to TensorZero as request tags.
TENSORZERO_STATIC_TAGS=
CLOUDFLARE_ACCOUNT_ID=
CLOUDFLARE_API_TOKEN=
CLOUDFLARE_LLM_MODEL=@cf/meta/llama-3.1-8b-instruct
MINDMAP_BASE=http://localhost:8086
MINDMAP_CONSTELLATION_ID=8c1b7a8c-7b38-4a6b-9bc3-3f1fdc9a1111
MINDMAP_NOTEBOOK_ID=
HIRAG_NOTEBOOK_ID=
HIRAG_V2_HOST_PORT=8086
HIRAG_V2_GPU_HOST_PORT=8087

# ---- Model backends (defaults are safe/local) ----
# TensorZero (OpenAI-compatible) gateway. If running locally via `make up-tensorzero`,
# this will default to the in-cluster gateway. Set to a remote URL to use a remote stack.
TENSORZERO_BASE_URL=http://tensorzero-gateway:3000
TENSORZERO_API_KEY=
# Default embedding route for TensorZero's OpenAI-compatible API
TENSORZERO_EMBED_MODEL=tensorzero::embedding_model_name::gemma_embed_local
LANGEXTRACT_PROVIDER=rule

# Ollama local models. `make up-tensorzero` also launches a bundled Ollama sidecar.
OLLAMA_URL=http://pmoves-ollama:11434
OLLAMA_EMBED_MODEL=embeddinggemma:300m

# Generic OpenAI-compatible gateway (LM Studio, vLLM, NIM, etc.)
OPENAI_COMPAT_BASE_URL=
OPENAI_COMPAT_API_KEY=
OPENAI_COMPAT_EMBED_MODEL=text-embedding-3-small

# Hi‑RAG v2 reranking/embedding tuning
RERANK_ENABLE=true
# CPU default; GPU service overrides to Qwen by default. You can change at runtime via Make targets.
RERANK_MODEL=BAAI/bge-reranker-base
RERANK_TOPN=50
RERANK_K=10
RERANK_FUSION=mul
SENTENCE_MODEL=all-MiniLM-L6-v2

# ---- Agent UI images (published) ----
# Override to use published images for headless+UI builds instead of building locally.
# Example stable tags (adjust as your registry publishes):
AGENT_ZERO_IMAGE=ghcr.io/cataclysm-studios-inc/pmoves-agent-zero:pmoves-latest
ARCHON_IMAGE=ghcr.io/cataclysm-studios-inc/pmoves-archon:pmoves-latest
ARCHON_UI_IMAGE=ghcr.io/cataclysm-studios-inc/pmoves-archon-ui:pmoves-latest
DEEPRESEARCH_IMAGE=ghcr.io/powerfulmoves/pmoves-deepresearch:stable
SUPASERCH_IMAGE=ghcr.io/powerfulmoves/pmoves-supaserch:stable

# Console tiles (override if agents are on remote hosts)
NEXT_PUBLIC_AGENT_ZERO_URL=http://localhost:8080
NEXT_PUBLIC_ARCHON_URL=http://localhost:8091
# Optional custom health paths for UI badges (fallbacks: /healthz, /api/health, /)
NEXT_PUBLIC_AGENT_ZERO_HEALTH_PATH=/healthz
NEXT_PUBLIC_ARCHON_HEALTH_PATH=/healthz

# Server-side REST base for direct PostgREST queries (fallback for console pages)
# If using compose PostgREST, this should be http://localhost:3010
POSTGREST_URL=http://localhost:3010

# Agent Zero native UI URL (upstream runtime UI). API remains on :8080 by default.
NEXT_PUBLIC_AGENT_ZERO_UI_URL=http://localhost:8081
NEXT_PUBLIC_ARCHON_UI_URL=http://localhost:3737

# Agent Zero MCP servers (semicolon-delimited key: url pairs). Example includes Archon MCP over HTTP.
# A0_MCP_SERVERS=
#   fs: "mcp://filesystem?roots=/data";
#   archon: "mcp://http?endpoint=http://archon-server:8051";
#   neo4j: "mcp://neo4j?url=bolt://neo4j:7687&user=neo4j&password=${NEO4J_PASSWORD}";
#   supabase: "mcp://supabase?url=${SUPABASE_URL}&key=${SUPABASE_SERVICE_ROLE_KEY}";

# UI smoke/health
SMOKE_SHARED_SECRET=change-me-for-local-smoke

# Console mode
# SINGLE_USER_MODE=1 enables personal-first UX with boot-JWT auto-auth and hides login prompts.
SINGLE_USER_MODE=1
NEXT_PUBLIC_SINGLE_USER_MODE=1

# PMOVES.YT (optional published image)
PMOVES_YT_IMAGE=ghcr.io/cataclysm-studios-inc/pmoves-yt:pmoves-latest

## Open Notebook
OPEN_NOTEBOOK_IMAGE=ghcr.io/lfnovo/open-notebook:v1-latest
OPEN_NOTEBOOK_API_URL=http://cataclysm-open-notebook:5055
OPEN_NOTEBOOK_API_TOKEN=
OPEN_NOTEBOOK_PASSWORD=changeme
# Local SurrealDB defaults (override when pointing at an external Surreal instance)
OPEN_NOTEBOOK_SURREAL_URL=ws://cataclysm-open-notebook-surrealdb:8000/rpc
OPEN_NOTEBOOK_SURREAL_ADDRESS=cataclysm-open-notebook-surrealdb
OPEN_NOTEBOOK_SURREAL_PORT=8000
OPEN_NOTEBOOK_SURREAL_USER=root
OPEN_NOTEBOOK_SURREAL_PASS=root
OPEN_NOTEBOOK_SURREAL_NAMESPACE=open-notebook
OPEN_NOTEBOOK_SURREAL_DATABASE=open-notebook
# Legacy aliases consumed by older scripts (keep in sync with the OPEN_NOTEBOOK_ values above)
SURREAL_URL=${OPEN_NOTEBOOK_SURREAL_URL}
SURREAL_ADDRESS=${OPEN_NOTEBOOK_SURREAL_ADDRESS}
SURREAL_PORT=${OPEN_NOTEBOOK_SURREAL_PORT}
SURREAL_USER=${OPEN_NOTEBOOK_SURREAL_USER}
SURREAL_PASS=${OPEN_NOTEBOOK_SURREAL_PASS}
SURREAL_NAMESPACE=${OPEN_NOTEBOOK_SURREAL_NAMESPACE}
SURREAL_DATABASE=${OPEN_NOTEBOOK_SURREAL_DATABASE}

## DeepResearch integration
DEEPRESEARCH_MODE=openrouter
DEEPRESEARCH_TIMEOUT=600
DEEPRESEARCH_OPENROUTER_MODEL=tongyi-deepresearch
DEEPRESEARCH_OPENROUTER_API_BASE=https://openrouter.ai/api
DEEPRESEARCH_API_BASE=http://deepresearch-local:8080
DEEPRESEARCH_PLANNING_ENDPOINT=/api/research
DEEPRESEARCH_NOTEBOOK_ID=
DEEPRESEARCH_NOTEBOOK_TITLE_PREFIX=DeepResearch
DEEPRESEARCH_NOTEBOOK_EMBED=true
DEEPRESEARCH_NOTEBOOK_ASYNC=true

## Channel monitor
CHANNEL_MONITOR_CONFIG_PATH=/app/config/channel_monitor.json
CHANNEL_MONITOR_QUEUE_URL=http://pmoves-yt:8077/yt/ingest
CHANNEL_MONITOR_DATABASE_URL=postgresql://postgres:postgres@host.docker.internal:65432/postgres
CHANNEL_MONITOR_NAMESPACE=pmoves
CHANNEL_MONITOR_SECRET=
CHANNEL_MONITOR_STATUS_URL=http://channel-monitor:8097/api/monitor/status
CHANNEL_MONITOR_STATUS_SECRET=

# pmoves-yt ↔ channel monitor callback
CHANNEL_MONITOR_STATUS_URL=http://channel-monitor:8097/api/monitor/status
CHANNEL_MONITOR_STATUS_SECRET=

# yt-dlp feature toggles
YT_CONCURRENCY=2
YT_RATE_LIMIT=0.0
YT_ARCHIVE_DIR=/data/yt-dlp
YT_ENABLE_DOWNLOAD_ARCHIVE=true
YT_DOWNLOAD_ARCHIVE=
YT_SUBTITLE_LANGS=en
YT_SUBTITLE_AUTO=false
YT_WRITE_INFO_JSON=true
YT_POSTPROCESSORS_JSON=
YT_UPSERT_BATCH_SIZE=200
YT_ASYNC_UPSERT_ENABLED=true
YT_ASYNC_UPSERT_MIN_CHUNKS=200
YT_INDEX_LEXICAL_DISABLE_THRESHOLD=0
SOUNDCLOUD_USERNAME=
SOUNDCLOUD_PASS=
INVIDIOUS_BASE_URL=https://yewtu.be
INVIDIOUS_COMPANION_URL=
INVIDIOUS_COMPANION_KEY=
INVIDIOUS_FALLBACK_FORMAT=video/mp4
INVIDIOUS_HMAC_KEY=
INVIDIOUS_PG_DB=invidious
INVIDIOUS_PG_USER=kemal
INVIDIOUS_PG_PASSWORD=kemal
INVIDIOUS_COMPANION_PUBLIC_URL=http://localhost:8282
INVIDIOUS_COMPANION_LISTEN=127.0.0.1:8282

# -------- Monitoring (Grafana/Prometheus/Loki) --------
PROMETHEUS_HOST_PORT=9090
GRAFANA_HOST_PORT=3002
LOKI_HOST_PORT=3100
CADVISOR_HOST_PORT=8080

# Optional: OpenTelemetry (future)
#OTEL_EXPORTER_OTLP_ENDPOINT=http://otel-collector:4318
#OTEL_SERVICE_NAME=pmoves
INVIDIOUS_BIND=127.0.0.1:3000
INVIDIOUS_EXTERNAL_PORT=3000
INVIDIOUS_DOMAIN=
INVIDIOUS_HTTPS_ONLY=false
INVIDIOUS_STATISTICS_ENABLED=false
INVIDIOUS_USE_INNERTUBE_CAPTIONS=true
INVIDIOUS_USE_REDIRECTOR=true
INVIDIOUS_REDIRECTOR_URL=https://redirect.invidious.io
YT_ENABLE_PO_TOKEN=true
YT_PO_TOKEN_VALUE=
YT_PO_TOKEN_ITAG=18
# Gemma summarization providers
YT_GEMMA_MODEL=gemma2:9b-instruct
HF_GEMMA_MODEL=google/gemma-2-9b-it
FFW_PROVIDER=faster-whisper
WHISPER_MODEL=small
YT_TRANSCRIPT_PROVIDER=faster-whisper
YT_WHISPER_MODEL=small
YT_TRANSCRIPT_DIARIZE=false
# Qwen2‑Audio transcription (ffmpeg‑whisper)
QWEN2_AUDIO_MODEL=Qwen/Qwen2-Audio-7B-Instruct
QWEN2_AUDIO_MAX_NEW_TOKENS=512
GRAYJAY_PLUGIN_HOST_PUBLIC_URL=http://localhost:9096
GRAYJAY_PLUGIN_REGISTRY_TITLE=PMOVES Plugin Registry
GRAYJAY_PLUGIN_REGISTRY_URL=http://grayjay-plugin-host:8080/plugins
GRAYJAY_JELLYFIN_PLUGIN_NAME=PMOVES Jellyfin
GRAYJAY_JELLYFIN_PLUGIN_ID=pmoves-jellyfin
GRAYJAY_JELLYFIN_PLUGIN_DESCRIPTION=Self-hosted Jellyfin connector for PMOVES
GRAYJAY_SERVER_BIND=0.0.0.0
GRAYJAY_SERVER_PORT=9095

## n8n
N8N_API_KEY=
N8N_RUNNERS_AUTH_TOKEN=

## Domain integrations
WGER_IMAGE=ghcr.io/cataclysm-studios-inc/pmoves-health-wger:pmoves-latest
WGER_SITE_URL=http://localhost:8000
WGER_FROM_EMAIL="PMOVES Health Coach <ops@cataclysmstudios.com>"
WGER_BRAND_SITE_NAME=PMOVES Health Portal
WGER_BRAND_GYM_NAME=PMOVES Health Lab
WGER_BRAND_GYM_CITY=Distributed Mesh
WGER_BRAND_ADMIN_FIRST_NAME=PMOVES
WGER_BRAND_ADMIN_LAST_NAME=Ops
WGER_BRAND_ADMIN_EMAIL=ops@cataclysmstudios.com
WGER_BRAND_ADMIN_USERNAME=admin
WGER_BRAND_WAIT_SECS=90
WGER_API_TOKEN=
FIREFLY_IMAGE=ghcr.io/cataclysm-studios-inc/pmoves-firefly-iii:pmoves-latest
FIREFLY_ACCESS_TOKEN=
FIREFLY_CMD_LN_TOKEN=
FIREFLY_PA_TOKEN_NAME=
FIREFLY_PORT=8082

## Discord publisher
DISCORD_WEBHOOK_URL=
DISCORD_USERNAME=Cataclysm Publisher
DISCORD_AVATAR_URL=https://pmoves.ai/assets/cataclysm-avatar.png

## Jellyfin
JELLYFIN_URL=http://jellyfin:8096
JELLYFIN_PUBLIC_BASE_URL=http://localhost:8096
JELLYFIN_URL=http://cataclysm-jellyfin:8096
JELLYFIN_IMAGE=ghcr.io/cataclysm-studios-inc/pmoves-jellyfin:pmoves-latest
JELLYFIN_PUBLISHED_URL=
JELLYFIN_PUBLISHED_URL=https://media.cataclysmstudios.net
JELLYFIN_API_KEY=
JELLYFIN_USER_ID=

## Misc (MinIO, etc.)
MINIO_USER=cataclysm_pmoves
MINIO_PASSWORD=
VALID_API_KEYS=
NEXT_PUBLIC_BACKEND_API_KEY=

## Cloudflare tunnel (optional remote access)
# Preferred: token-based connector generated from Zero Trust → Access → Tunnels → Add a connector (Docker).
CLOUDFLARE_TUNNEL_TOKEN=
# Alternative: supply a tunnel name and credentials directory when using cert-based auth.
CLOUDFLARE_TUNNEL_NAME=
CLOUDFLARE_CREDENTIALS_DIR=./cloudflared
# Optional ingress overrides (comma-separated entries like service=url).
CLOUDFLARE_TUNNEL_INGRESS=
CLOUDFLARE_TUNNEL_HOSTNAMES=
CLOUDFLARE_TUNNEL_METRICS_PORT=
# -------- Tailscale (optional) --------
TAILSCALE_AUTO_JOIN=false
TAILSCALE_AUTHKEY=
TAILSCALE_AUTHKEY_FILE=CATACLYSM_STUDIOS_INC/PMOVES-PROVISIONS/tailscale/tailscale_authkey.txt
TAILSCALE_TAGS=tag:pmoves
TAILSCALE_HOSTNAME=
TAILSCALE_ACCEPT_ROUTES=true
TAILSCALE_ADVERTISE_ROUTES=
TAILSCALE_LOGIN_SERVER=
TAILSCALE_SSH=true
TAILSCALE_SIGN_AUTHKEY=auto
# retrieval-eval
EVAL_HTTP_PORT=8090
