graph TB
    classDef repo fill:#636e72,stroke:#2d3436,stroke-width:2px,color:#ffffff
    classDef docs fill:#74b9ff,stroke:#0984e3,stroke-width:2px,color:#ffffff
    classDef service fill:#a29bfe,stroke:#6c5ce7,stroke-width:2px,color:#ffffff
    classDef data fill:#ffeaa7,stroke:#fdcb6e,stroke-width:2px,color:#000000
    classDef infra fill:#fd79a8,stroke:#e84393,stroke-width:2px,color:#ffffff
    classDef network fill:#4ecdc4,stroke:#00b894,stroke-width:2px,color:#ffffff
    classDef edge fill:#ff6b6b,stroke:#d63031,stroke-width:2px,color:#ffffff

    subgraph Repo[Repository Surfaces]
        repo_core[pmoves/\nCore services & Make targets]:::repo
        repo_docs[pmoves/docs/\nRunbooks, smoke evidence, ARC]:::docs
        repo_prov[CATACLYSM_STUDIOS_INC/PMOVES-PROVISIONS\nProvisioning bundle templates]:::infra
        repo_integrations[integrations-workspace/\nAgent Zero & Archon forks]:::repo
    end

    subgraph Services[Runtime Layers]
        direction TB
        subgraph Agents[Agent & Workflow Tier]
            agents_stack[Agent Zero, Archon, mesh-agent, publisher-discord]:::service
            n8n_stack[n8n flows & automation bridge]:::service
        end
        subgraph AI[AI & Retrieval Tier]
            ai_gateways[hi-rag-gateway-v2, langextract, extract-worker]:::service
            media_pipeline[pmoves-yt, media-video/audio, ffmpeg-whisper]:::service
        end
        subgraph Data[State & Knowledge Tier]
            data_core[Postgres, Supabase overlays, PostgREST]:::data
            vector_layer[Qdrant, Meilisearch, Neo4j graph seeds]:::data
            object_store[MinIO buckets, tensorzero-clickhouse]:::data
        end
        subgraph External[External & Companion Stacks]
            external_stack[Firefly III, Wger, Jellyfin, Invidious, TensorZero UI]:::service
            cloud_access[Cloudflared tunnels, Tailscale ingress hooks]:::edge
        end
    end

    subgraph Networks[Network Fabric]
        pmoves_net[pmoves-net\nPrimary overlay/bridge network]:::network
        cataclysm_net[cataclysm-net\nJellyfin AI overlay]:::network
        tailscale_net[Tailscale or WireGuard tailnet\nSite-to-site mesh]:::network
        edge_proxy[Edge ingress via Cloudflare or HTTPS load balancer]:::edge
    end

    %% Relationships
    repo_core --> agents_stack
    repo_core --> ai_gateways
    repo_core --> media_pipeline
    repo_core --> data_core
    repo_core --> vector_layer
    repo_core --> object_store
    repo_docs --> agents_stack
    repo_docs --> ai_gateways
    repo_docs --> data_core
    repo_docs --> external_stack
    repo_prov --> pmoves_net
    repo_prov --> cataclysm_net
    repo_prov --> tailscale_net
    repo_integrations --> agents_stack
    repo_integrations --> n8n_stack

    agents_stack --> pmoves_net
    n8n_stack --> pmoves_net
    ai_gateways --> pmoves_net
    media_pipeline --> pmoves_net
    data_core --> pmoves_net
    vector_layer --> pmoves_net
    object_store --> pmoves_net
    external_stack --> cataclysm_net
    external_stack --> pmoves_net
    cloud_access --> edge_proxy
    edge_proxy --> pmoves_net
    edge_proxy --> tailscale_net
    tailscale_net --> pmoves_net
    tailscale_net --> cataclysm_net